<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>第 17 章 一致性 | 軟體設計的哲學，第二版</title><meta name="description" content="">
    <link rel="preload" href="/aposd2e-zh/assets/style-BCXB3hdu.css" as="style"><link rel="stylesheet" href="/aposd2e-zh/assets/style-BCXB3hdu.css">
    <link rel="modulepreload" href="/aposd2e-zh/assets/app-W63b2ksF.js"><link rel="modulepreload" href="/aposd2e-zh/assets/ch17.html-BYystyuG.js">
    <link rel="prefetch" href="/aposd2e-zh/assets/index.html-C8yF2JyF.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch01.html-DkPkfcRS.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch02.html-SKcVpglb.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch03.html-CYfuZhGY.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch04.html-BqQx7L5F.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch05.html-BdlbO1EP.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch06.html-DQ2z4_oI.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch07.html-DnUm3OlX.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch08.html-BcXx4lud.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch09.html-_f4OzlMP.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch10.html-CZ5fB4NB.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch11.html-Df97RaZQ.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch12.html-D1CnKaFu.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch13.html-CU8E9uKP.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch14.html-DktAD4IF.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch15.html-yKH2gkpR.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch16.html-gDa-0gj8.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch17.html-DuxeKp60.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch18.html-Dd05Kj7W.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch19.html-DDB1BO1B.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch20.html-CtW7o7-6.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch21.html-CB0B05mu.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch22.html-BdO2PIdO.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/preface.html-KQzkY5sC.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/summary.html-C0FvbWpg.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/index.html-6z48wkIS.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch01.html-CcKJzOS6.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch02.html-mhJRdQxr.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch03.html-C7WxHAO7.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch04.html-Cr18H9Oz.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch05.html-Cg5mO23V.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch06.html-BwPIBhME.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch07.html-BuycO6lP.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch08.html-CCOpH9SO.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch09.html-BRKp13n3.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch10.html-B8hYcQdJ.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch11.html-4sA-4k_Z.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch12.html-Cw9Cgx7u.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch13.html-DLbDJvnJ.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch14.html-9MlUEuVz.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch15.html-D0qWs5en.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch16.html-r5LEBx0A.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch17.html-NBqCyBVK.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch18.html-BmB71b1p.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch19.html-BK5E1h1d.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch20.html-BvcguQGm.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch21.html-BfB2WhYm.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch22.html-CYXSt5dB.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/preface.html-jvKYDElY.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/summary.html-D_QScZTv.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/index.html-BrKAJVM5.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch01.html-BMsHCmV_.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch02.html-pt4nDnLx.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch03.html-C9Ybgw_J.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch04.html-BIzWNlkN.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch05.html-ChMTJcdP.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch06.html-DeCrXO_y.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch07.html-Cwi25lxt.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch08.html-CASyE8rD.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch09.html-CC9kQSHu.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch10.html-BftOoV4B.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch11.html-De_ORSMB.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch12.html-D9RS1igg.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch13.html-CNN9vJTJ.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch14.html-BbaC82t-.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch15.html-R49U4jd7.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch16.html-DQWAM23T.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch18.html-97wEMaR1.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch19.html-C9d9XN2L.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch20.html-BbYP5ZSL.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch21.html-Cf_rEMwt.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/ch22.html-JB0y-dkF.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/preface.html-Df7sGrJO.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/summary.html-3dYRuP4k.js" as="script"><link rel="prefetch" href="/aposd2e-zh/assets/404.html-4i1mSffm.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/aposd2e-zh/zh-tw/"><!----><span class="vp-site-name" aria-hidden="true">軟體設計的哲學，第二版</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">選擇語言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">選擇語言</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd2e-zh/ch17.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd2e-zh/en/ch17.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/aposd2e-zh/zh-tw/ch17.html" aria-label="繁体中文"><!--[--><!--[--><!--]--><!--]-->繁体中文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/yingang/aposd2e-zh" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">選擇語言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">選擇語言</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd2e-zh/ch17.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/aposd2e-zh/en/ch17.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/aposd2e-zh/zh-tw/ch17.html" aria-label="繁体中文"><!--[--><!--[--><!--]--><!--]-->繁体中文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/yingang/aposd2e-zh" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/" aria-label=" 簡介"><!--[--><!--[--><!--]--><!--]--> 簡介<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/preface.html" aria-label=" 前言"><!--[--><!--[--><!--]--><!--]--> 前言<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch01.html" aria-label=" 第 1 章 介紹"><!--[--><!--[--><!--]--><!--]--> 第 1 章 介紹<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch02.html" aria-label=" 第 2 章 複雜性的本質"><!--[--><!--[--><!--]--><!--]--> 第 2 章 複雜性的本質<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch03.html" aria-label=" 第 3 章 能工作的程式碼是不夠的"><!--[--><!--[--><!--]--><!--]--> 第 3 章 能工作的程式碼是不夠的<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch04.html" aria-label=" 第 4 章 模組應該是深的"><!--[--><!--[--><!--]--><!--]--> 第 4 章 模組應該是深的<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch05.html" aria-label=" 第 5 章 資訊隱藏和資訊洩露"><!--[--><!--[--><!--]--><!--]--> 第 5 章 資訊隱藏和資訊洩露<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch06.html" aria-label=" 第 6 章 通用的模組是更深的"><!--[--><!--[--><!--]--><!--]--> 第 6 章 通用的模組是更深的<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch07.html" aria-label=" 第 7 章 不同的層級，不同的抽象"><!--[--><!--[--><!--]--><!--]--> 第 7 章 不同的層級，不同的抽象<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch08.html" aria-label=" 第 8 章 下沉複雜性"><!--[--><!--[--><!--]--><!--]--> 第 8 章 下沉複雜性<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch09.html" aria-label=" 第 9 章 在一起更好還是分開更好？"><!--[--><!--[--><!--]--><!--]--> 第 9 章 在一起更好還是分開更好？<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch10.html" aria-label=" 第 10 章 透過定義來規避錯誤"><!--[--><!--[--><!--]--><!--]--> 第 10 章 透過定義來規避錯誤<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch11.html" aria-label=" 第 11 章 設計兩次"><!--[--><!--[--><!--]--><!--]--> 第 11 章 設計兩次<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch12.html" aria-label=" 第 12 章 不寫註釋的四個藉口"><!--[--><!--[--><!--]--><!--]--> 第 12 章 不寫註釋的四個藉口<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch13.html" aria-label=" 第 13 章 註釋應該描述程式碼中難以理解的內容"><!--[--><!--[--><!--]--><!--]--> 第 13 章 註釋應該描述程式碼中難以理解的內容<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch14.html" aria-label=" 第 14 章 選取名稱"><!--[--><!--[--><!--]--><!--]--> 第 14 章 選取名稱<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch15.html" aria-label=" 第 15 章 先寫註釋"><!--[--><!--[--><!--]--><!--]--> 第 15 章 先寫註釋<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch16.html" aria-label=" 第 16 章 修改現有的程式碼"><!--[--><!--[--><!--]--><!--]--> 第 16 章 修改現有的程式碼<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/aposd2e-zh/zh-tw/ch17.html" aria-label=" 第 17 章 一致性"><!--[--><!--[--><!--]--><!--]--> 第 17 章 一致性<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch18.html" aria-label=" 第 18 章 程式碼應該是易理解的"><!--[--><!--[--><!--]--><!--]--> 第 18 章 程式碼應該是易理解的<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch19.html" aria-label=" 第 19 章 軟體發展趨勢"><!--[--><!--[--><!--]--><!--]--> 第 19 章 軟體發展趨勢<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch20.html" aria-label=" 第 20 章 效能設計"><!--[--><!--[--><!--]--><!--]--> 第 20 章 效能設計<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch21.html" aria-label=" 第 21 章 決定什麼是重要的"><!--[--><!--[--><!--]--><!--]--> 第 21 章 決定什麼是重要的<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/ch22.html" aria-label=" 第 22 章 結論"><!--[--><!--[--><!--]--><!--]--> 第 22 章 結論<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/aposd2e-zh/zh-tw/summary.html" aria-label=" 總結"><!--[--><!--[--><!--]--><!--]--> 總結<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="第-17-章-一致性" tabindex="-1"><a class="header-anchor" href="#第-17-章-一致性"><span>第 17 章 一致性</span></a></h1><p>一致性是一個強大的工具，可以降低系統複雜性並使其行為更容易理解。如果系統是一致的，則意味著相似的事情以相似的方式完成，而不同的事情則以不同的方式完成。一致性創造了認知槓桿：一旦你瞭解了某個地方的工作方式，就可以使用該知識立即瞭解其他使用相同方式的地方。如果系統沒有以一致的風格實現，則開發人員必須分別瞭解每種情況，這將花費更多的時間。</p><p>一致性減少了失誤。如果系統不是一致的，兩種實際上不相同的情況可能看起來是一樣的。開發人員可能會看到一個看起來很熟悉的模式，並根據以前遇到的模式做出錯誤的假設。另一方面，如果系統是一致的，則基於看起來很熟悉的情況所做的假設就會很安全。一致性允許開發人員更快速的工作，還能減少失誤。</p><h2 id="_17-1-一致性示例" tabindex="-1"><a class="header-anchor" href="#_17-1-一致性示例"><span>17.1 一致性示例</span></a></h2><p>一致性可以應用於系統中的許多層級，這裡是一些例子。</p><p><strong>名稱。</strong> <a class="route-link" href="/aposd2e-zh/zh-tw/ch14.html">第 14 章</a>已經討論了以一致的方式使用名稱的好處。</p><p><strong>編碼風格。</strong> 如今，開發組織通常會制定編碼風格指南，在編譯器所強制執行的規則之外對程式進行額外的結構限制。現代的風格指南解決了一系列問題，例如縮排、花括號放置、宣告順序、命名、註釋以及對認為危險的語言特性的限制。風格指南使程式碼更易於閱讀，並且可以減少某些型別的錯誤。</p><p><strong>介面。</strong> 具有多種實現的介面是一致性的另一個示例。一旦瞭解了介面的其中一種實現，其他的實現都將變得更易於理解，因為你已經知道它將會提供的特性。</p><p><strong>設計模式。</strong> 設計模式是某些常見問題的普遍接受的解決方案，例如用於使用者介面設計的模型-檢視-控制器（MVC）方法。如果你可以使用現有的設計模式來解決問題，則實現會更快地進行，也更有可能奏效，並且你的程式碼對讀者來說也會更容易理解。設計模式將在<a class="route-link" href="/aposd2e-zh/zh-tw/ch19.html">第 19.5 節</a>中詳細討論。</p><p><strong>不變數。</strong> 不變數是引數值或結構的屬性，它總是不變的。例如，儲存文字行的資料結構可能會強制要求每行始終以換行符終止。不變數減少了程式碼中必須考慮的特殊情況，並且更容易推斷程式碼的行為。</p><h2 id="_17-2-確保一致性" tabindex="-1"><a class="header-anchor" href="#_17-2-確保一致性"><span>17.2 確保一致性</span></a></h2><p>一致性很難保持，尤其是當許多人長時間從事一個專案時。一個小組的人可能不瞭解另一小組中建立的約定。新來的人不瞭解約定，因此他們無意間違反了約定，並建立了與現有約定衝突的新約定。以下是建立和保持一致性的一些技巧：</p><p><strong>文件。</strong> 建立一個文件，並列出最重要的總體約定，例如編碼風格指南。將文件放置在開發人員容易會看到的位置，例如專案維基（Wiki）的顯要位置。鼓勵新加入小組的成員來閱讀這些文件，並鼓勵現有的團隊人員時不時對文件進行審查。一些來自不同組織的風格指南已經在網上釋出；考慮從其中之一開始。</p><p>對於那些更加區域性的約定，例如不變數，請在程式碼中找到合適的位置進行記錄。如果你不把這些約定寫下來，那麼其他人也不太可能會遵循它們。</p><p><strong>強制執行。</strong> 即使有好的文件，開發人員也很難記住所有約定。強制執行約定的最佳方法是編寫一個檢查違規的工具，並確保程式碼在透過檢查之前不能提交到儲存庫。自動檢查對於低層級的語法約定特別有用。</p><p>我最近的一個專案有行終止符的問題。一些開發人員在 Unix 上工作，行由換行符終止；其他的人工作在 Windows 上，行通常由回車符加上換行符來終止。如果某個系統上的開發人員對先前在另一個系統上編輯過的檔案進行了編輯，那麼編輯器有時會將所有行終止符替換為適合該系統的行終止符。這給人的感覺是檔案的每一行都被修改了，也就讓人很難追蹤有意義的變化。我們建立了一個約定，即檔案應該只包含換行符，但是很難確保每個開發人員使用的每個工具都遵循這個約定。每當一個新的開發人員加入這個專案，我們都會遇到大量的行終止符問題，直到開發人員適應了這個約定。</p><p>我們最終透過編寫了一個簡短的指令碼解決了這個問題，該指令碼會在變更提交到原始碼儲存庫之前自動執行。該指令碼檢查所有已修改的檔案，如果其中任何一行包含回車符，則中止提交。該指令碼也可以手動執行，透過用換行符替換回車符加換行符來修復損壞的檔案。這一下子就消除了問題，並且還有助於培訓新的開發人員。</p><p>程式碼審查為強制執行約定和向新的開發人員培訓這些約定提供了另一個契機。程式碼審閱者越挑剔，團隊中的每個人學習約定的速度就越快，並且程式碼越清晰。</p><p><strong>入鄉隨俗。</strong> 所有約定中最重要的約定是每個開發人員都應遵循古老的格言：“到了羅馬，就按羅馬人那樣做。” 在編寫新程式碼時，請先看看現有的程式碼是如何組織的。是否在私有變數和方法之前聲明瞭所有的公有變數和方法？方法是否按字母順序排列？變數是像 <code>firstServerName</code> 那樣使用駝峰命名法，還是像 <code>first_server_name</code> 中那樣使用蛇形命名法？當你看到任何看起來可能是約定的內容時，請遵循該約定。在做出設計決策時，請問自己是否有可能在專案的其它地方做出了類似的決策；如果是這樣，請找到一個現有示例，並在新程式碼中使用相同的方式。</p><p><strong>不要改變現有約定。</strong> 抵制“改善”現有約定的衝動。<strong>有一個“更好的想法”並不是引入不一致的充分藉口。</strong> 你的新想法可能確實更好，但是一致性勝過不一致的價值幾乎總是大於一種方法勝過另一種方法的價值。在引入不一致的行為之前，請問自己兩個問題。首先，你是否擁有在建立舊約定時還不存在的全新資訊來支援使用新的方法？其次，新的方法是否好到值得花時間去更新所有舊的用法？如果你的組織同意這兩個問題的回答均為“是”，那麼就去進行更新；當你完成後，應該不會有任何舊約定的痕跡留下來。然而，你仍然面臨著其他開發人員不瞭解新約定的風險，因此他們將來可能會重新引入舊的方法。總體而言，重新考慮已建立的約定很少會是對開發人員時間的良好利用。</p><h2 id="_17-3-做過頭了" tabindex="-1"><a class="header-anchor" href="#_17-3-做過頭了"><span>17.3 做過頭了</span></a></h2><p>一致性不僅意味著相似的事情應該以相似的方式完成，而且不同的事情也應該以不同的方式完成。如果你對一致性過於熱衷，並試圖對不同的事物強制採用相同的方法，例如對確實不同的事物使用相同的變數名，或者對不適合該模式的任務使用現有的設計模式，那隻會造成複雜性和混亂。一致性只有在開發人員確信“如果它看起來像 <code>x</code>，它確實是 <code>x</code>”時才會帶來好處。</p><h2 id="_17-4-結論" tabindex="-1"><a class="header-anchor" href="#_17-4-結論"><span>17.4 結論</span></a></h2><p>一致性是投資思維的另一個例子。確保一致性的工作將需要一些額外的工作：決定使用什麼約定、建立自動檢查程式、尋找舊程式碼中的類似情況以在新程式碼中模仿、在程式碼審查中培訓團隊成員。這項投資的回報是你的程式碼將更容易理解。開發人員將能夠更快和更準確地瞭解程式碼的行為，這將使他們能夠更快地工作，並引入更少的缺陷。</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">上次更新: </span><time class="meta-item-info" datetime="2025-04-08T03:57:20.000Z" data-allow-mismatch>2025/4/8 凌晨3:57</time></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/aposd2e-zh/zh-tw/ch16.html" aria-label=" 第 16 章 修改現有的程式碼"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link"> 第 16 章 修改現有的程式碼</span></div><!--]--></a><a class="route-link auto-link next" href="/aposd2e-zh/zh-tw/ch18.html" aria-label=" 第 18 章 程式碼應該是易理解的"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link"> 第 18 章 程式碼應該是易理解的</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/aposd2e-zh/assets/app-W63b2ksF.js" defer></script>
  </body>
</html>
